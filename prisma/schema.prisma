generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  previewFeatures = ["views"]
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model sysdiagrams {
  name         String @db.NVarChar(128)
  principal_id Int
  diagram_id   Int    @id(map: "PK__sysdiagr__C2B05B615FB337D6") @default(autoincrement())
  version      Int?
  definition   Bytes?

  @@unique([principal_id, name], map: "UK_principal_name")
}

model tblcat {
  id          Int           @id(map: "PK_tblcat") @default(autoincrement())
  catName     String        @db.VarChar(100)
  tblcriteria tblcriteria[]
}

model tblcriteria {
  id                            Int                             @id(map: "PK_tblcriteria") @default(autoincrement())
  lawRefID                      Int?
  catID                         Int
  criteriaName                  String                          @db.VarChar(250)
  factor                        Int                             @db.TinyInt
  tblcat                        tblcat                          @relation(fields: [catID], references: [id], onUpdate: NoAction, map: "FK_tblcriteria_tblcat")
  tbllawref                     tbllawref?                      @relation(fields: [lawRefID], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_tblcriteria_tbllawref")
  tblevaluation_baseform_detail tblevaluation_baseform_detail[]
  tblevalutionformdetail        tblevalutionformdetail[]
}

model tblenum {
  id                                          Int            @id(map: "PK_tblenum") @default(autoincrement())
  groupname                                   String         @db.VarChar(30)
  name                                        String         @db.VarChar(30)
  tblevaluated_tblevaluated_vilageIDTotblenum tblevaluated[] @relation("tblevaluated_vilageIDTotblenum")
  tblevaluated_tblevaluated_cityIDTotblenum   tblevaluated[] @relation("tblevaluated_cityIDTotblenum")
}

model tblevaluated {
  id                                     Int                  @id(map: "PK_tblevaluated") @default(autoincrement())
  name                                   String               @db.VarChar(25)
  Lname                                  String?              @db.VarChar(25)
  code                                   String               @db.VarChar(30)
  responsibleID                          Int
  manageID                               Int?
  provinceID                             Int?
  cityID                                 Int?
  vilageID                               Int?
  address                                String?              @db.VarChar(250)
  phone                                  String?              @db.VarChar(20)
  signature                              String?              @db.VarChar(250)
  tblenum_tblevaluated_vilageIDTotblenum tblenum?             @relation("tblevaluated_vilageIDTotblenum", fields: [vilageID], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_tblevaluated_tblenum1")
  tblenum_tblevaluated_cityIDTotblenum   tblenum?             @relation("tblevaluated_cityIDTotblenum", fields: [cityID], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_tblevaluated_tblenum2")
  tblevaluated                           tblevaluated         @relation("tblevaluatedTotblevaluated", fields: [id], references: [id], onUpdate: NoAction, map: "FK_tblevaluated_tblevaluated")
  other_tblevaluated                     tblevaluated?        @relation("tblevaluatedTotblevaluated")
  tblmanager                             tblmanager?          @relation(fields: [manageID], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_tblevaluated_tblmanager")
  tblresponsible                         tblresponsible       @relation(fields: [responsibleID], references: [id], onUpdate: NoAction, map: "FK_tblevaluated_tblresponsible")
  tblevaluation_form                     tblevaluation_form[]
}

model tblevaluation_baseform {
  id                            Int                             @id(map: "PK_tblevaluation_baseform") @default(autoincrement())
  rangePackID                   Int
  name                          String                          @db.VarChar(50)
  creatorMemberID               Int
  createDate                    DateTime                        @db.DateTime
  tblevaluation_rang_pack       tblevaluation_rang_pack         @relation(fields: [rangePackID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_baseform_tblevaluation_rang_pack")
  tblevaluation_baseform_detail tblevaluation_baseform_detail[]
  tblevaluation_form            tblevaluation_form[]
}

model tblevaluation_baseform_detail {
  id                     Int                    @id(map: "PK_tblevaluation_baseform_detail") @default(autoincrement())
  evaluation_baseformID  Int
  criteriaID             Int
  creatorMemberID        Int
  createDate             DateTime               @db.DateTime
  tblcriteria            tblcriteria            @relation(fields: [criteriaID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_baseform_detail_tblcriteria")
  tblevaluation_baseform tblevaluation_baseform @relation(fields: [evaluation_baseformID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_baseform_detail_tblevaluation_baseform")
}

model tblevaluation_form {
  id                     Int                      @id(map: "PK_tblevaluation_form") @default(autoincrement())
  evaluatorID            Int
  evaluatedID            Int
  baseFormID             Int
  managerID              Int
  name                   String                   @db.VarChar(50)
  evaluatorSignature     String?                  @db.VarChar(250)
  evaluatorSignatureDate DateTime?                @db.DateTime
  evaluatedSignature     String?                  @db.VarChar(250)
  evaluatedSignatureDate DateTime?                @db.DateTime
  creatorMemberID        Int
  createdate             DateTime                 @db.DateTime
  tblevaluated           tblevaluated             @relation(fields: [evaluatedID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_form_tblevaluated")
  tblevaluation_baseform tblevaluation_baseform   @relation(fields: [baseFormID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_form_tblevaluation_baseform")
  tblevaluator           tblevaluator             @relation(fields: [evaluatorID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_form_tblevaluator")
  tblmanager             tblmanager               @relation(fields: [managerID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_form_tblmanager")
  tblevalutionformdetail tblevalutionformdetail[]
}

model tblevaluation_rang {
  id                      Int                     @id(map: "PK_tblevaluation_rang") @default(autoincrement())
  packID                  Int
  value                   String                  @db.VarChar(10)
  tblevaluation_rang_pack tblevaluation_rang_pack @relation(fields: [packID], references: [id], onUpdate: NoAction, map: "FK_tblevaluation_rang_tblevaluation_rang_pack")
}

model tblevaluation_rang_pack {
  id                     Int                      @id(map: "PK_tblevaluation_rang_pack") @default(autoincrement())
  name                   String                   @db.VarChar(100)
  packType               Boolean
  tblevaluation_baseform tblevaluation_baseform[]
  tblevaluation_rang     tblevaluation_rang[]
}

model tblevaluator {
  id                 Int                  @id(map: "PK_tblevaluator") @default(autoincrement())
  nationalCode       String               @db.VarChar(10)
  fname              String               @db.VarChar(20)
  lname              String               @db.VarChar(30)
  mobile             String               @db.VarChar(11)
  accountNo          String               @db.VarChar(12)
  shaba              String               @db.VarChar(24)
  signature          String               @db.VarChar(250)
  createdate         DateTime             @db.DateTime
  tblevaluation_form tblevaluation_form[]
}

model tblevalutionformdetail {
  id                 Int                @id(map: "PK_tblevalutionformdetail") @default(autoincrement())
  evaluationFormID   Int
  criteriaID         Int
  factor             Int                @db.TinyInt
  tblcriteria        tblcriteria        @relation(fields: [criteriaID], references: [id], onUpdate: NoAction, map: "FK_tblevalutionformdetail_tblcriteria")
  tblevaluation_form tblevaluation_form @relation(fields: [evaluationFormID], references: [id], onUpdate: NoAction, map: "FK_tblevalutionformdetail_tblevaluation_form")
}

model tbllawref {
  id          Int           @id(map: "PK_tbllawref") @default(autoincrement())
  refName     String        @db.VarChar(100)
  tblcriteria tblcriteria[]
}

model tblmanager {
  id                 Int                  @id(map: "PK_tblmanager") @default(autoincrement())
  name               String               @db.NVarChar(50)
  lname              String               @db.NVarChar(50)
  mobile             String               @db.Char(11)
  nationalCode       String               @db.Char(10)
  tblevaluated       tblevaluated[]
  tblevaluation_form tblevaluation_form[]
}

model tblresponsible {
  id           Int            @id(map: "PK_tblresponsible") @default(autoincrement())
  name         String         @db.VarChar(30)
  fname        String         @db.VarChar(30)
  mobile       String         @db.VarChar(11)
  tblevaluated tblevaluated[]
}

model tbluser {
  userID    Int       @id(map: "PK_tbluser") @default(autoincrement())
  fName     String?   @db.VarChar(20)
  lName     String?   @db.VarChar(25)
  phone     String    @db.VarChar(11)
  address   String?   @db.VarChar(250)
  birthDate DateTime? @db.Date
  createdAt DateTime  @db.Date
  isActive  Boolean
}

model tblusercode {
  userCodeID BigInt    @id(map: "PK_tblusercode") @default(autoincrement())
  userID     Int
  userCode   Int       @db.SmallInt
  createdAt  DateTime? @db.DateTime
}

model tbluserlog {
  logID     Int      @id(map: "PK_tbluserlog") @default(autoincrement())
  loginDate DateTime @db.DateTime
  userID    Int
  createdAT DateTime @db.DateTime
}

view viwAllBaseFormCriteria {
  id                    Int
  criteriaName          String @db.VarChar(250)
  factor                Int    @db.TinyInt
  catName               String @db.VarChar(100)
  catid                 Int
  criteriaExist         Int
  evaluation_baseformID Int
}
